name: bitbucket
connection_types:
  bitbucket:
    name: bitbucket
is_connection_optional: false
request_url_conn_type: bitbucket
actions:
  listWorkspaceRepos:
    alias: ListWorkspaceRepos
    parameters:
      workspace:
        alias: "Workspace slug"
        index: 1
  createRepository:
    alias: CreateRepository
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      name:
        alias: "Repo name"
        index: 2
      workspace:
        alias: "Workspace slug"
        index: 3
      is_private:
        alias: "Is private"
        index: 4
      has_issues:
        alias: "Has issues"
        index: 5
      has_wiki:
        alias: "Has wiki"
        index: 6
      description:
        alias: "Description"
        index: 7
      project:
        alias: "Project"
        index: 8
      fork_policy:
        alias: "Fork policy"
        index: 9
      language:
        alias: "Language"
        index: 10
      mainbranch:
        alias: "Default branch"
        index: 11
  deleteRepository:
    alias: DeleteRepository
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
  updateRepository:
    alias: UpdateRepository
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      name:
        alias: "Repo name"
        index: 2
      workspace:
        alias: "Workspace slug"
        index: 3
      is_private:
        alias: "Is private"
        index: 4
      has_issues:
        alias: "Has issues"
        index: 5
      has_wiki:
        alias: "Has wiki"
        index: 6
      description:
        alias: "Description"
        index: 7
      project:
        alias: "Project"
        index: 8
      fork_policy:
        alias: "Fork policy"
        index: 9
      language:
        alias: "Language"
        index: 10
      mainbranch:
        alias: "Default branch"
        index: 11
  createRepoWebHook:
    alias: CreateRepoWebHook
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
      url:
        alias: "Url"
        index: 3
        required: true
      events:
        alias: "Events"
        index: 4
        required: true
        is_multi: true
      active:
        alias: "Active"
        index: 5
      description:
        alias: "Description"
        index: 6
  listRepoWebHooks:
    alias: ListRepoWebHooks
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
  listCommits:
    alias: ListCommits
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
  listBranches:
    alias: ListBranches
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
      q:
        alias: "Query string"
        index: 3
      sort:
        alias: "Sort"
        index: 4
  listPullRequests:
    alias: ListPullRequests
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
      state:
        alias: "State"
        index: 3
  getPullRequest:
    alias: GetPullRequest
    parameters:
      pull_request_id:
        alias: "Pull request id"
        index: 1
      repo_slug:
        alias: "Repo slug"
        index: 2
      workspace:
        alias: "Workspace slug"
        index: 3
  # There's no 'merge branch' endpoint. To merge a branch, create a pull request and then merge it.
  mergePullRequest:
    alias: MergePullRequest
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
      pull_request_id:
        alias: "PullRequestId"
        index: 3
      async:
        alias: "Async"
        index: 4
      merge_strategy:
        alias: "Merge strategy"
        index: 5
      close_source_branch:
        alias: "Close source branch"
        index: 6
      message:
        alias: "Message"
        index: 7
  updatePullRequest:
    alias: UpdatePullRequest
    parameters:
      pull_request_id:
        alias: "Pull request ID"
        index: 1
      title:
        alias: "Title"
        index: 2
      repo_slug:
        alias: "Repo slug"
        index: 3
      workspace:
        alias: "Workspace slug"
        index: 4
      source__branch__name:
        alias: "Source branch"
        index: 5
      destination__branch__name:
        alias: "Destination branch"
        index: 6
  createPullRequest:
    alias: CreatePullRequest
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
      title:
        alias: "Title"
        index: 3
        required: true
      source__branch__name:
        alias: "Source branch"
        index: 4
        required: true
      destination__branch__name:
        alias: "Destination branch"
        index: 5
        required: true
      state:
        alias: "State"
        index: 6
  updateRepositoryPipelineKeyPair:
    alias: CreateOrUpdateRepoSSHKey
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
      private_key:
        alias: "Private key"
        index: 3
        required: true
      public_key:
        alias: "Public key"
        index: 4
        required: true
  deleteRepositoryPipelineKeyPair:
    alias: DeleteRepoSSHKey
    parameters:
      repo_slug:
        alias: "Repo slug"
        index: 1
      workspace:
        alias: "Workspace slug"
        index: 2
